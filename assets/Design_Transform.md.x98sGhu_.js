import{_ as a}from"./chunks/mp_addplugin.pe280tQx.js";import{_ as s,c as n,o as e,a4 as i}from"./chunks/framework.Br2U662V.js";const l="/minigame-unity-webgl-transform/assets/scene.lhTRWbUv.png",p="/minigame-unity-webgl-transform/assets/export.CQlpBdYZ.png",t="/minigame-unity-webgl-transform/assets/devtools_preview.BlOHG4Jk.png",o="/minigame-unity-webgl-transform/assets/addPlugin.wW8f1Te-.png",r="/minigame-unity-webgl-transform/assets/auth_plugin.DqkcQvPd.png",C=JSON.parse('{"title":"转换工具导出微信小游戏","description":"","frontmatter":{},"headers":[],"relativePath":"Design/Transform.md","filePath":"Design/Transform.md"}'),d={name:"Design/Transform.md"},c=i('<h1 id="转换工具导出微信小游戏" tabindex="-1">转换工具导出微信小游戏 <a class="header-anchor" href="#转换工具导出微信小游戏" aria-label="Permalink to &quot;转换工具导出微信小游戏&quot;">​</a></h1><h2 id="一、unity导出webgl" tabindex="-1">一、Unity导出WebGL <a class="header-anchor" href="#一、unity导出webgl" aria-label="Permalink to &quot;一、Unity导出WebGL&quot;">​</a></h2><p>添加需要导出的scene</p><img src="'+l+'" width="600"><p>建议仅勾选Loading场景，后续场景使用AssetsBundle/Addressable进行按需加载。</p><h2 id="二、适配小游戏" tabindex="-1">二、适配小游戏 <a class="header-anchor" href="#二、适配小游戏" aria-label="Permalink to &quot;二、适配小游戏&quot;">​</a></h2><h3 id="_2-1-转换小游戏" tabindex="-1">2.1 转换小游戏 <a class="header-anchor" href="#_2-1-转换小游戏" aria-label="Permalink to &quot;2.1 转换小游戏&quot;">​</a></h3><p>顶部菜单栏 点击 微信小游戏 -&gt; 转换小游戏， 填写相应参数，点击<code>生成并转换</code>按钮 ，等待转换完成。</p><img src="'+p+`" width="600"><p>其中：</p><ol><li>必须</li></ol><ul><li>游戏appid：小游戏的appid(勿用测试appid, 注册开通小游戏请查阅<a href="https://developers.weixin.qq.com/minigame/dev/guide/" target="_blank" rel="noreferrer">快速上手 </a>)</li><li>游戏资源CDN：首资源所在HTTP或CDN地址；运行时Application.streamingAssetPath=&quot;CDN/StreamingAssets&quot;</li><li>导出路径：转换后文件目录</li></ul><ol start="2"><li>可选</li></ol><ul><li>小游戏项目名：开发者工具中展示的小游戏项目名</li><li>首包资源加载方式：CDN-使用CDN下载首包资源；小游戏包内-首资源放在小游戏代码包内(总上限为20MB)</li><li>加载阶段视频URL：启动需要一定耗时，在启动加载时会循环播放这段视频，视频格式请参考<a href="./video.html">视频规范</a></li><li>启动背景/视频封面图：启动阶段背景图片；如果配置了加载阶段视频URL，则作为视频封面。</li><li>游戏方向：游戏是横屏还是竖屏，可选值参考<a href="https://developers.weixin.qq.com/minigame/dev/reference/configuration/app.html" target="_blank" rel="noreferrer">deviceOrientation</a></li><li>不自动缓存文件类型：游戏资源CDN下不自动缓存的文件类型，具体参见<a href="./UsingLoader.html">AssetBundle缓存</a></li><li>Bundle名中Hash长度：自定义AssetBundle名中Hash长度用于缓存控制，具体参见<a href="./UsingLoader.html">AssetBundle缓存</a></li><li>预下载列表：网络空闲时预下载的资源，<a href="./UsingPreload.html">使用预下载</a></li><li>SDK功能选项：<a href="./OpenData.html">好友关系链</a></li><li>调试编译选项</li></ul><h3 id="_2-2-了解转换后目录结构" tabindex="-1">2.2 了解转换后目录结构 <a class="header-anchor" href="#_2-2-了解转换后目录结构" aria-label="Permalink to &quot;2.2 了解转换后目录结构&quot;">​</a></h3><p>在转换完成后，会在导出路径下生成如下目录</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minigame</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webgl</span></span></code></pre></div><ul><li>minigame为小游戏项目</li><li>webgl为unity导出为webgl后的资源和代码目录</li></ul><h3 id="_2-3-资源部署" tabindex="-1">2.3 资源部署 <a class="header-anchor" href="#_2-3-资源部署" aria-label="Permalink to &quot;2.3 资源部署&quot;">​</a></h3><p>转换完成后，参照<a href="./DataCDN.html">小游戏资源部署</a>章节进行资源部署，并了解启动Loader在加载资源时的缓存逻辑。</p><h3 id="_2-4-小游戏预览" tabindex="-1">2.4 小游戏预览 <a class="header-anchor" href="#_2-4-小游戏预览" aria-label="Permalink to &quot;2.4 小游戏预览&quot;">​</a></h3><ol><li>下载小游戏开发者工具 <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noreferrer">微信开发者工具</a></li></ol><blockquote><p>需要下载，<code>稳定版 Stable Build</code>，非小游戏版！</p></blockquote><ol start="2"><li>导入项目 参考<a href="https://developers.weixin.qq.com/minigame/dev/guide/#%E5%AE%89%E8%A3%85%E5%B9%B6%E5%90%AF%E5%8A%A8%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7" target="_blank" rel="noreferrer">小游戏快速开始</a></li></ol><p>导入转换后的<code>minigame</code>目录</p><ol start="3"><li>工具预览 <img src="`+t+'"></li></ol><p>注意：</p><blockquote><p>项目使用了小游戏Unity适配插件，若小游戏是第一次使用本插件，在开发者工具会报错提示插件未授权</p></blockquote><img src="'+o+'"><p><strong>请前往mp后台-能力地图-生产提效包-快适配，开通使用</strong></p><img src="'+a+'"><img src="'+r+`"><ol start="4"><li>真机预览 点击<strong>预览</strong>，扫码二维码预览即可。</li></ol><p>请不要使用真机调试！！ 请不要使用真机调试！！ 请不要使用真机调试！！</p><h2 id="三、使用脚本集成到自己的构建系统" tabindex="-1">三、使用脚本集成到自己的构建系统 <a class="header-anchor" href="#三、使用脚本集成到自己的构建系统" aria-label="Permalink to &quot;三、使用脚本集成到自己的构建系统&quot;">​</a></h2><p>如果你希望将导出插件集成到自己的发布流程，想脚本调用的话，可修改 <code>Assets/WX-WASM-SDK/Editor/MiniGameConfig.asset</code>配置，然后调用WXEditorWindow 的 DoExport方法导出小游戏</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>var win = new WXEditorWindow();</span></span>
<span class="line"><span>win.DoExport();</span></span></code></pre></div><h3 id="minigameconfig-asset支持的配置" tabindex="-1"><code>MiniGameConfig.asset</code>支持的配置 <a class="header-anchor" href="#minigameconfig-asset支持的配置" aria-label="Permalink to &quot;\`MiniGameConfig.asset\`支持的配置&quot;">​</a></h3><h4 id="与转换面板配置有对应关系的配置项" tabindex="-1">与转换面板配置有对应关系的配置项 <a class="header-anchor" href="#与转换面板配置有对应关系的配置项" aria-label="Permalink to &quot;与转换面板配置有对应关系的配置项&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>// 基本设置</span></span>
<span class="line"><span>Appid -- 小游戏appid</span></span>
<span class="line"><span>CDN -- 游戏资源CDN</span></span>
<span class="line"><span>projectName -- 小游戏项目名</span></span>
<span class="line"><span>Orientation -- 游戏方向</span></span>
<span class="line"><span>maxStorage -- 最大内存，修改此值需要联系研发助手开通权限，否则无效</span></span>
<span class="line"><span>DST -- 导出路径</span></span>
<span class="line"><span>// 启动Loader设置</span></span>
<span class="line"><span>bgImageSrc -- 背景图/封面图</span></span>
<span class="line"><span>VideoUrl -- 加载阶段视频URL</span></span>
<span class="line"><span>assetLoadType -- 首包资源加载方式</span></span>
<span class="line"><span>bundleExcludeExtensions -- 不自动缓存文件类型</span></span>
<span class="line"><span>bundleHashLength -- bundle名中hash长度</span></span>
<span class="line"><span>// 预下载</span></span>
<span class="line"><span>preloadFiles -- 预下载文件列表，用;分隔</span></span>
<span class="line"><span>// SDK功能</span></span>
<span class="line"><span>UseFriendRelation -- 使用好友关系链</span></span>
<span class="line"><span>// 调试编译选项</span></span>
<span class="line"><span>DevelopBuild -- Development Build</span></span>
<span class="line"><span>AutoProfile -- Autoconnect Profiler</span></span>
<span class="line"><span>ScriptOnly -- Scripts Only Build</span></span>
<span class="line"><span>profilingFuncs -- Profiling Funcs</span></span>
<span class="line"><span>Webgl2 -- WebGL2.0</span></span>
<span class="line"><span>DeleteStreamingAssets -- DeleteStreamingAssets</span></span></code></pre></div><h4 id="不常用配置" tabindex="-1">不常用配置 <a class="header-anchor" href="#不常用配置" aria-label="Permalink to &quot;不常用配置&quot;">​</a></h4><p>使用说明参考<a href="./UsingLoader.html">Loader配置</a></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>// 资源加载与缓存</span></span>
<span class="line"><span>dataFileSubPrefix: 配置首包资源加载路径</span></span>
<span class="line"><span>bundlePathIdentifier: URL中包含特定标识符时需要自动缓存，用;分隔</span></span>
<span class="line"><span>defaultReleaseSize: 达到缓存上限时默认额外清理的存储大小，用;分隔</span></span>
<span class="line"><span>needCacheTextures: 是否开启纹理缓存</span></span>
<span class="line"><span>texturesPath: 纹理存储路径</span></span>
<span class="line"><span>texturesHashLength: 纹理中hash长度</span></span>
<span class="line"><span>// 启动界面</span></span>
<span class="line"><span>loadingBarWidth: 加载进度条宽度</span></span>
<span class="line"><span>HideAfterCallMain: 是否初始化完成立即隐藏封面</span></span></code></pre></div><h2 id="四、常见问题" tabindex="-1">四、常见问题 <a class="header-anchor" href="#四、常见问题" aria-label="Permalink to &quot;四、常见问题&quot;">​</a></h2><p>请查阅<a href="./DevelopmentQAList.html">技术常见问题QA</a></p>`,45),h=[c];function m(g,u,b,f,_,k){return e(),n("div",null,h)}const x=s(d,[["render",m]]);export{C as __pageData,x as default};
