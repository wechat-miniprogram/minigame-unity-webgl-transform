import{_ as a,c as e,o as t,a4 as i}from"./chunks/framework.Br2U662V.js";const l="/minigame-unity-webgl-transform/assets/iosmetal_enable.CG4A_yNU.png",o="/minigame-unity-webgl-transform/assets/enable_ios_metal_by_config.DheaK20I.png",s="/minigame-unity-webgl-transform/assets/iosmetal_enable_log.DIMgFvko.png",S=JSON.parse('{"title":"iOS Metal 渲染模式","description":"","frontmatter":{},"headers":[],"relativePath":"Design/iOSMetal.md","filePath":"Design/iOSMetal.md"}'),r={name:"Design/iOSMetal.md"},n=i('<h1 id="ios-metal-渲染模式" tabindex="-1">iOS Metal 渲染模式 <a class="header-anchor" href="#ios-metal-渲染模式" aria-label="Permalink to &quot;iOS Metal 渲染模式&quot;">​</a></h1><h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h2><p>iOS Metal 渲染模式是在 iOS 平台下，小游戏底层渲染不再使用传统 WebGL，而是直接调用 Apple 官方的 Metal 图形接口。Metal 是苹果推出的高性能图形渲染 API，能够更好地发挥 iOS 设备的硬件性能，提升渲染效率和画面质量。</p><p>采用 Metal 渲染后，小游戏可获得更低的渲染延迟、更高的帧率以及更丰富的图形特效，尤其适合对性能和画质要求较高的 3D 游戏或大型项目。</p><h2 id="特别说明" tabindex="-1">特别说明 <a class="header-anchor" href="#特别说明" aria-label="Permalink to &quot;特别说明&quot;">​</a></h2><ol><li>iOS Metal 渲染模式仅支持 <strong>iOS 高性能+模式</strong>，小游戏会保留 WebGL 渲染作为回退方案。</li><li>iOS 高性能模式、Android、PC 及微信开发者工具暂不支持 Metal 渲染，将自动降级为 WebGL。</li><li>微信版本需 <code>&gt;= 8.0.63</code>，低版本微信会自动降级为 WebGL。</li><li>Metal 渲染模式对 iOS 系统无特殊要求，满足微信要求的 iOS 14.0+ 即可。</li><li>基础库版本需 <code>&gt;= 3.10.0</code>，低版本基础库会自动降级为 WebGL。</li><li>当前仅支持 <code>团结引擎 1.6.2 及以上</code> 接入。</li><li>Metal 渲染模式目前处于 Beta 测试阶段，建议<strong>充分验证后</strong>再发布。</li></ol><h2 id="接入指南" tabindex="-1">接入指南 <a class="header-anchor" href="#接入指南" aria-label="Permalink to &quot;接入指南&quot;">​</a></h2><h3 id="_1-sdk-接入" tabindex="-1">1. SDK 接入 <a class="header-anchor" href="#_1-sdk-接入" aria-label="Permalink to &quot;1. SDK 接入&quot;">​</a></h3><p>请参考 <a href="./SDKInstaller.html">微信 SDK 安装</a>，采用 <code>Package方式</code>进行安装。</p><p>操作步骤：<code>打开游戏工程</code> -&gt; <code>Editor 菜单栏</code> -&gt; <code>Package Manager</code> -&gt; <code>右上角 &quot;+&quot;</code> -&gt; <code>Add package from git URL</code> -&gt; 输入下方 URL 地址，完成 SDK 导入。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//github.com/wechat-miniprogram/minigame-tuanjie-transform-sdk.git</span></span></code></pre></div><h3 id="_2-开启-metal-渲染" tabindex="-1">2. 开启 Metal 渲染 <a class="header-anchor" href="#_2-开启-metal-渲染" aria-label="Permalink to &quot;2. 开启 Metal 渲染&quot;">​</a></h3><p>通过「微信小游戏工具面板」-「调试编译选项」-「iOS Metal」勾选并开启转换。</p><img src="'+l+'" width="500" alt="开启Metal渲染"><p>温馨提示：</p><p>如工具面板无「iOS Metal」选项，可能是插件版本未更新。可手动修改插件的 Mini Game Config 配置文件，在 Editor 工程中选中该文件， 在 Inspector 面板展开 Compile Options，并勾选 enableiOSMetal 选项，如下图：</p><img src="'+o+'" width="500" alt="勾选配置的 iOSMetal 选项"><p>按正常流程打包即可。</p><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="q1-如何确认游戏已启用-metal-渲染模式" tabindex="-1">Q1. 如何确认游戏已启用 Metal 渲染模式？ <a class="header-anchor" href="#q1-如何确认游戏已启用-metal-渲染模式" aria-label="Permalink to &quot;Q1. 如何确认游戏已启用 Metal 渲染模式？&quot;">​</a></h3><p>请按以下步骤验证：</p><ol><li>删除本地小游戏（包括开发版、体验版和正式版）。</li><li>重新进入游戏并打开调试，查看 vConsole 日志。</li></ol><ul><li>vConsole 第一行，确认基础库版本 <code>&gt;=3.10.0</code>。</li><li>渲染初始化阶段，查看是否有“Metal 渲染已启用”等相关日志信息。 <img src="'+s+'" width="400" alt="成功开启Metal渲染"></li></ul><h3 id="q2-为什么开启-metal-渲染后-部分机型表现异常" tabindex="-1">Q2. 为什么开启 Metal 渲染后，部分机型表现异常？ <a class="header-anchor" href="#q2-为什么开启-metal-渲染后-部分机型表现异常" aria-label="Permalink to &quot;Q2. 为什么开启 Metal 渲染后，部分机型表现异常？&quot;">​</a></h3><p>A2. 部分设备或系统可能存在兼容性问题。建议优先在主流 iOS 设备上测试。如遇问题，<a href="./IssueAndContact.html">请联系我们</a>协助排查。</p><h3 id="q3-metal-渲染模式下-遇到性能或画面异常如何处理" tabindex="-1">Q3. Metal 渲染模式下，遇到性能或画面异常如何处理？ <a class="header-anchor" href="#q3-metal-渲染模式下-遇到性能或画面异常如何处理" aria-label="Permalink to &quot;Q3. Metal 渲染模式下，遇到性能或画面异常如何处理？&quot;">​</a></h3><p>A3. Metal 与 WebGL 在底层实现上差异较大，部分自定义 Shader 或特殊渲染逻辑可能需要适配。建议优先在主流 iOS 设备上测试。如有问题，<a href="./IssueAndContact.html">请联系我们</a>协助定位。</p><h3 id="q4-metal-渲染模式对包体和资源有影响吗" tabindex="-1">Q4. Metal 渲染模式对包体和资源有影响吗？ <a class="header-anchor" href="#q4-metal-渲染模式对包体和资源有影响吗" aria-label="Permalink to &quot;Q4. Metal 渲染模式对包体和资源有影响吗？&quot;">​</a></h3><p>A4. 由于同时存在 Metal 和 WebGL 两套 Shader，Shader 资源体积约为原来的 2 倍。但实际运行时只加载一套 Shader，内存占用变化不大。Wasm 代码包体积略有增加，影响较小。如有疑问，<a href="./IssueAndContact.html">请联系我们</a>协助分析。</p><h3 id="q5-可以同时勾选-ios-metal-和-emscriptenglx-打包小游戏吗" tabindex="-1">Q5. 可以同时勾选 iOS Metal 和 EmscriptenGLX 打包小游戏吗？ <a class="header-anchor" href="#q5-可以同时勾选-ios-metal-和-emscriptenglx-打包小游戏吗" aria-label="Permalink to &quot;Q5. 可以同时勾选 iOS Metal 和 EmscriptenGLX 打包小游戏吗？&quot;">​</a></h3><p>A5. 可以。如同时勾选，iOS 设备满足 Metal 渲染条件时优先采用 Metal，否则回退到 EmscriptenGLX 渲染方案。</p><h3 id="q6-ios-metal-是否支持开放数据域" tabindex="-1">Q6. iOS Metal 是否支持开放数据域？ <a class="header-anchor" href="#q6-ios-metal-是否支持开放数据域" aria-label="Permalink to &quot;Q6. iOS Metal 是否支持开放数据域？&quot;">​</a></h3><p>A6. 支持 screenCanvas 模式，目前不支持 offscreenCanvas。如遇问题，<a href="./IssueAndContact.html">请联系我们</a>协助排查。<br><a href="https://developers.weixin.qq.com/minigame/dev/guide/open-ability/opendata/basic.html" target="_blank" rel="noreferrer">开放数据域介绍</a></p><h3 id="q7-勾选-ios-metal-后-是否还需设置-webgl1-和-webgl2" tabindex="-1">Q7. 勾选 iOS Metal 后，是否还需设置 WebGL1 和 WebGL2？ <a class="header-anchor" href="#q7-勾选-ios-metal-后-是否还需设置-webgl1-和-webgl2" aria-label="Permalink to &quot;Q7. 勾选 iOS Metal 后，是否还需设置 WebGL1 和 WebGL2？&quot;">​</a></h3><p>A7. 需要。iOS Metal 仅支持 iOS 平台，其他平台仍采用 WebGL 渲染。当 iOS 小游戏不满足 Metal 渲染条件时也会回退到 WebGL。如遇问题，<a href="./IssueAndContact.html">请联系我们</a>协助排查。</p><h3 id="q8-勾选-ios-metal-后-导出-ios-小游戏包运行异常怎么办" tabindex="-1">Q8. 勾选 iOS Metal 后，导出 iOS 小游戏包运行异常怎么办？ <a class="header-anchor" href="#q8-勾选-ios-metal-后-导出-ios-小游戏包运行异常怎么办" aria-label="Permalink to &quot;Q8. 勾选 iOS Metal 后，导出 iOS 小游戏包运行异常怎么办？&quot;">​</a></h3><p>A8. 请先确认已勾选 <strong>iOS 高性能+模式</strong>，如仍有问题可尝试重启 Unity Editor 重新打包。如问题依旧，<a href="./IssueAndContact.html">请联系我们</a>协助排查。</p>',37),h=[n];function d(c,m,p,b,g,u){return t(),e("div",null,h)}const M=a(r,[["render",d]]);export{S as __pageData,M as default};
