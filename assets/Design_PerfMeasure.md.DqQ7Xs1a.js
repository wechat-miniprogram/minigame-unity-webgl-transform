import{_ as t,c as e,o as a,a4 as r}from"./chunks/framework.Br2U662V.js";const d="/minigame-unity-webgl-transform/assets/ios_start_performance.COdU60g3.png",n="/minigame-unity-webgl-transform/assets/ios_running_performance.BhKw0KAS.png",i="/minigame-unity-webgl-transform/assets/android_start_performance.BEBLnORD.png",o="/minigame-unity-webgl-transform/assets/android_running_performance.DuhaNO5M.png",_=JSON.parse('{"title":"Unity WebGL小游戏适配方案性能标准","description":"","frontmatter":{},"headers":[],"relativePath":"Design/PerfMeasure.md","filePath":"Design/PerfMeasure.md"}'),l={name:"Design/PerfMeasure.md"},s=r('<h1 id="unity-webgl小游戏适配方案性能标准" tabindex="-1">Unity WebGL小游戏适配方案性能标准 <a class="header-anchor" href="#unity-webgl小游戏适配方案性能标准" aria-label="Permalink to &quot;Unity WebGL小游戏适配方案性能标准&quot;">​</a></h1><h2 id="为什么需要性能评测标准" tabindex="-1">为什么需要性能评测标准？ <a class="header-anchor" href="#为什么需要性能评测标准" aria-label="Permalink to &quot;为什么需要性能评测标准？&quot;">​</a></h2><p>Unity性能评测标准用于开发者优化游戏性能数据，提升用户体验。评测标准根据小游戏整体的性能数据表现，结合操作系统、机型分档等多种维度建立。</p><h2 id="评测标准细则" tabindex="-1">评测标准细则 <a class="header-anchor" href="#评测标准细则" aria-label="Permalink to &quot;评测标准细则&quot;">​</a></h2><h3 id="性能基线" tabindex="-1">性能基线 <a class="header-anchor" href="#性能基线" aria-label="Permalink to &quot;性能基线&quot;">​</a></h3><p>评测小游戏性能首先需要确定性能基线, 即先确定机型设备条件，开发者可通过<a href="https://developers.weixin.qq.com/minigame/dev/guide/performance/perf-benchmarkLevel.html#%E6%9C%BA%E5%9E%8B%E6%A1%A3%E4%BD%8D%E4%B8%8EBenchmarkLevel%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB" target="_blank" rel="noreferrer">机型档位映射</a>获取机型档位的参考机型。</p><h3 id="游戏类型说明" tabindex="-1">游戏类型说明 <a class="header-anchor" href="#游戏类型说明" aria-label="Permalink to &quot;游戏类型说明&quot;">​</a></h3><table><thead><tr><th style="text-align:center;">分类</th><th>定义</th></tr></thead><tbody><tr><td style="text-align:center;">重度</td><td>玩法较复杂，通常包含较多游戏场景或支持多人在线游戏（eg: MMO、SLG品类等）</td></tr><tr><td style="text-align:center;">中度</td><td>包含一定养成玩法、内置内购商城等（eg: 模拟经营、卡牌等）</td></tr><tr><td style="text-align:center;">轻度</td><td>仅包含简单操作、无养成体系、无内购，以休闲娱乐为主（eg: 棋牌等）</td></tr></tbody></table><h3 id="指标与测量方法" tabindex="-1">指标与测量方法 <a class="header-anchor" href="#指标与测量方法" aria-label="Permalink to &quot;指标与测量方法&quot;">​</a></h3><p>Unity小游戏的启动可参考<a href="./Startup.html">启动流程与时序</a></p><table><thead><tr><th></th><th>定义</th><th>测量方法</th></tr></thead><tbody><tr><td>首资源包</td><td>游戏首个data资源文件</td><td>位于导出目录/webgl/md5.webgl.data.unityweb.bin.txt, CDN使用gzip压缩</td></tr><tr><td>WASM代码</td><td>游戏代码压缩包</td><td>位于导出目录/minigame/wasmcode/md5.webgl.wasm.code.unityweb.wasm.br, CDN使用gzip压缩</td></tr><tr><td>核心资源</td><td>除首资源包外进入游戏核心玩法所需的资源量</td><td>业务自定下载，通常为AssetBundle</td></tr><tr><td>CALLMAIN</td><td>引擎和首场景(Loading)初始化</td><td>通过timelog,或日志查看“CALLMAIN耗时”</td></tr><tr><td>游戏初始化完成</td><td>引擎和首场景完成，出现首个业务场景</td><td>通过timelog, 或日志查看“游戏启动耗时”</td></tr><tr><td>游戏可交互完成</td><td>游戏核心场景完成</td><td>通常定义为用户可交互的时机，可通过<a href="./ReportStartupStat.html">启动留存上报能力</a>上报统计。eg：休闲游戏为<strong>核心玩法</strong>，RPG游戏为<strong>创角</strong></td></tr><tr><td>内存峰值</td><td>内存峰值</td><td>进程内存峰值，测量方法请参考<a href="./OptimizationMemory.html">优化Unity WebGL的内存</a></td></tr><tr><td>内存异常退出运行时长</td><td>由于内存不足而使小游戏发生Crash时，当前游戏的运行时长，表示游戏的稳定运行时长</td><td>开发者可通过 <a href="https://developers.weixin.qq.com/minigame/analysis/assistant.html" target="_blank" rel="noreferrer">小游戏数据助手</a>（数据-性能分析）或 <a href="https://mp.weixin.qq.com/wxamp/frame/pluginRedirect/pluginRedirect?action=plugin_redirect&amp;plugin_uin=1041&amp;lang=zh_CN" target="_blank" rel="noreferrer">MP-研发工具箱-性能数据</a> 获取游戏的现网玩家的性能采集数据 通过<a href="https://developers.weixin.qq.com/minigame/analysis/assistant.html" target="_blank" rel="noreferrer">小游戏数据助手</a>查看（仅包含线上用户数据）</td></tr><tr><td>帧率</td><td>核心玩法的平均帧率</td><td>测量5分钟以上游戏核心玩法帧率，取平均值</td></tr><tr><td>卡顿率</td><td>核心玩法的平均卡顿率</td><td>测量5分钟以上游戏核心玩法卡顿率，取平均值</td></tr></tbody></table><h4 id="开发者需要关注哪些性能指标" tabindex="-1">开发者需要关注哪些性能指标 <a class="header-anchor" href="#开发者需要关注哪些性能指标" aria-label="Permalink to &quot;开发者需要关注哪些性能指标&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">阶段</th><th>重点关注指标</th></tr></thead><tbody><tr><td style="text-align:center;">启动</td><td>1. 游戏初始化完成耗时 2. 游戏可交互耗时</td></tr><tr><td style="text-align:center;">运行</td><td>1. 内存峰值 2. FPS均值 3. 卡顿率 4. 内存异常退出率(iOS) 5. 内存异常退出运行时长(iOS)</td></tr><tr><td style="text-align:center;">兼容性问题</td><td>1. 逻辑异常 2. 黑/白屏 3. JS Error</td></tr></tbody></table><h3 id="代码与资源体积" tabindex="-1">代码与资源体积 <a class="header-anchor" href="#代码与资源体积" aria-label="Permalink to &quot;代码与资源体积&quot;">​</a></h3><table><thead><tr><th>能力</th><th>下载量</th></tr></thead><tbody><tr><td>首资源包(gzip压缩后)</td><td>&lt;5MB</td></tr><tr><td>WASM代码(br压缩后)</td><td>&lt;5MB</td></tr><tr><td>核心玩法资源</td><td>&lt;30MB</td></tr></tbody></table><h3 id="评测标准" tabindex="-1">评测标准 <a class="header-anchor" href="#评测标准" aria-label="Permalink to &quot;评测标准&quot;">​</a></h3><blockquote><p>评测标准更新时间：2024-08-13（历史现网标准请查阅<a href="#历史评测标准">历史评测标准</a>）</p></blockquote><p>评测标准依赖于 <strong>现网真实玩家上报的性能数据</strong> 和 <strong>云测试批量测试数据</strong> 统计得出。</p><p><strong>注意：</strong></p><ul><li>FPS均值为大盘游戏数据计算所得，由于游戏可能会存在限帧逻辑，数据<strong>仅供参考</strong>，建议游戏依据自身游戏特性，合理控制游戏帧率表现。</li><li>设备平台的内存统计口径参考社区公告<a href="https://developers.weixin.qq.com/community/minigame/doc/0008662363cdb87ba25f8bf1250801?blockType=2" target="_blank" rel="noreferrer">《小游戏内存口径》</a>。</li><li><strong>红色</strong>指标值表示指标标准下降，未标注颜色指标值则表示当前指标项标准提升（与历史评测标准相比）或 与原有标准一致。</li></ul><h4 id="ios性能评测标准" tabindex="-1">iOS性能评测标准 <a class="header-anchor" href="#ios性能评测标准" aria-label="Permalink to &quot;iOS性能评测标准&quot;">​</a></h4><p><em><strong>启动性能</strong></em></p><img src="'+d+'"><p><em><strong>运行性能</strong></em></p><p>重点关注：<code>内存峰值</code>、<code>运行10mins内存峰值</code>、<code>内存异常退出率</code>、<code>内存异常退出运行时长</code></p><img src="'+n+'"><h4 id="android性能评测标准" tabindex="-1">Android性能评测标准 <a class="header-anchor" href="#android性能评测标准" aria-label="Permalink to &quot;Android性能评测标准&quot;">​</a></h4><p><em><strong>启动性能</strong></em></p><img src="'+i+'"><p><em><strong>运行性能</strong></em></p><img src="'+o+'"><h3 id="评测工具" tabindex="-1">评测工具 <a class="header-anchor" href="#评测工具" aria-label="Permalink to &quot;评测工具&quot;">​</a></h3><h4 id="现网阶段" tabindex="-1">现网阶段 <a class="header-anchor" href="#现网阶段" aria-label="Permalink to &quot;现网阶段&quot;">​</a></h4><h5 id="性能报告" tabindex="-1">性能报告 <a class="header-anchor" href="#性能报告" aria-label="Permalink to &quot;性能报告&quot;">​</a></h5><p>为了能够帮助开发者快速了解游戏整体的性能情况，平台通过对评测标准和游戏性能数据的整合，面向开发者提供一个较为全面的大盘性能监控系统，详细可通过 <a href="https://developers.weixin.qq.com/minigame/dev/guide/performance/perf-audit/perf-system-overview.html" target="_blank" rel="noreferrer">性能监控系统</a> 进行了解和使用。</p><h5 id="性能数据" tabindex="-1">性能数据 <a class="header-anchor" href="#性能数据" aria-label="Permalink to &quot;性能数据&quot;">​</a></h5><p>开发者可通过 <a href="https://developers.weixin.qq.com/minigame/analysis/assistant.html" target="_blank" rel="noreferrer">小游戏数据助手</a>（数据-性能分析）或 <a href="https://mp.weixin.qq.com/wxamp/frame/pluginRedirect/pluginRedirect?action=plugin_redirect&amp;plugin_uin=1041&amp;lang=zh_CN" target="_blank" rel="noreferrer">MP-研发工具箱-性能数据</a> 获取游戏的现网玩家的性能采集数据。</p><h4 id="开发阶段" tabindex="-1">开发阶段 <a class="header-anchor" href="#开发阶段" aria-label="Permalink to &quot;开发阶段&quot;">​</a></h4><blockquote><p>使用网络模拟工具1MB/s条件</p></blockquote><h5 id="小游戏云测试" tabindex="-1">小游戏云测试 <a class="header-anchor" href="#小游戏云测试" aria-label="Permalink to &quot;小游戏云测试&quot;">​</a></h5><p>云测试服务是一套完整易用的在线测试服务，以帮助开发者更高效、更全面地进行自动化游戏性能测试、兼容性测试。更多详情可查阅<a href="https://developers.weixin.qq.com/minigame/dev/guide/performance/perf-tools-cloudtest.html" target="_blank" rel="noreferrer">小游戏云测试</a>。</p><h5 id="性能诊断工具" tabindex="-1">性能诊断工具 <a class="header-anchor" href="#性能诊断工具" aria-label="Permalink to &quot;性能诊断工具&quot;">​</a></h5><p>微信小游戏性能诊断工具用于查看 开发版/体验版 运行时的网络和接口调用、运行性能以及启动耗时等信息，协助开发者更精确地定位问题并提供优化建议，详情可查阅<a href="https://developers.weixin.qq.com/minigame/dev/guide/performance/perf-audit/perf-audit-tool.html" target="_blank" rel="noreferrer">性能诊断工具</a>。</p><h5 id="perfdog" tabindex="-1">Perfdog <a class="header-anchor" href="#perfdog" aria-label="Permalink to &quot;Perfdog&quot;">​</a></h5><p>使用<a href="https://perfdog.qq.com/" target="_blank" rel="noreferrer">PerfDog</a>测试，PerfDog记录性能数据并上传，取平均值，每种机型测试3组数据再取平均，内存峰值取最大值。</p><h3 id="历史评测标准" tabindex="-1">历史评测标准 <a class="header-anchor" href="#历史评测标准" aria-label="Permalink to &quot;历史评测标准&quot;">​</a></h3><table><thead><tr><th style="text-align:center;">更新日期</th><th style="text-align:center;">文档</th></tr></thead><tbody><tr><td style="text-align:center;">2024.08.13</td><td style="text-align:center;">当前标准</td></tr><tr><td style="text-align:center;">2023.05.17</td><td style="text-align:center;"><a href="./performance-standard/PerfMeasure_20230517.html">评测标准文档</a></td></tr></tbody></table>',47),h=[s];function m(c,g,p,b,f,u){return a(),e("div",null,h)}const x=t(l,[["render",m]]);export{_ as __pageData,x as default};
