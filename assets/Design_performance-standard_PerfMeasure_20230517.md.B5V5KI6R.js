import{_ as t,c as e,o as a,a4 as r}from"./chunks/framework.Br2U662V.js";const d="/minigame-unity-webgl-transform/assets/ios_start_performance.DKHEzdfl.png",o="/minigame-unity-webgl-transform/assets/ios_running_performance.C2YhXpAi.png",n="/minigame-unity-webgl-transform/assets/android_start_performance.B_mgYBnj.png",i="/minigame-unity-webgl-transform/assets/android_running_performance.0A9W-niz.png",q=JSON.parse('{"title":"Unity WebGL小游戏适配方案性能标准","description":"","frontmatter":{},"headers":[],"relativePath":"Design/performance-standard/PerfMeasure_20230517.md","filePath":"Design/performance-standard/PerfMeasure_20230517.md"}'),s={name:"Design/performance-standard/PerfMeasure_20230517.md"},l=r('<h1 id="unity-webgl小游戏适配方案性能标准" tabindex="-1">Unity WebGL小游戏适配方案性能标准 <a class="header-anchor" href="#unity-webgl小游戏适配方案性能标准" aria-label="Permalink to &quot;Unity WebGL小游戏适配方案性能标准&quot;">​</a></h1><h2 id="为什么需要性能评测标准" tabindex="-1">为什么需要性能评测标准？ <a class="header-anchor" href="#为什么需要性能评测标准" aria-label="Permalink to &quot;为什么需要性能评测标准？&quot;">​</a></h2><p>Unity性能评测标准用于开发者优化游戏性能数据，提升用户体验。评测标准根据小游戏整体的性能数据表现，结合操作系统、机型分档等多种维度建立。</p><h2 id="评测标准细则" tabindex="-1">评测标准细则 <a class="header-anchor" href="#评测标准细则" aria-label="Permalink to &quot;评测标准细则&quot;">​</a></h2><h3 id="性能基线" tabindex="-1">性能基线 <a class="header-anchor" href="#性能基线" aria-label="Permalink to &quot;性能基线&quot;">​</a></h3><blockquote><ol><li>性能基线机型并非特定，但建议综合CPU、内存、GPU等选取性能相当的机型</li><li>更新时间：2023-05-17</li></ol></blockquote><table><thead><tr><th>档位</th><th>Android参考机型</th><th>iOS参考机型</th></tr></thead><tbody><tr><td>高档</td><td>⼩⽶10(⾼通骁⻰865)</td><td>iPhone13</td></tr><tr><td>中档</td><td>VIVO S7(⾼通骁⻰765G)、红米k30</td><td>iPhone11</td></tr><tr><td>低档</td><td>OPPO r9s(通骁⻰625)</td><td>iPhone7/8/X</td></tr></tbody></table><h3 id="指标与测量方法" tabindex="-1">指标与测量方法 <a class="header-anchor" href="#指标与测量方法" aria-label="Permalink to &quot;指标与测量方法&quot;">​</a></h3><p>Unity小游戏的启动可参考<a href="./../Startup.html">启动流程与时序</a></p><table><thead><tr><th></th><th>定义</th><th>测量方法</th></tr></thead><tbody><tr><td>首资源包</td><td>游戏首个data资源文件</td><td>位于导出目录/webgl/md5.webgl.data.unityweb.bin.txt, CDN使用gzip压缩</td></tr><tr><td>WASM代码</td><td>游戏代码压缩包</td><td>位于导出目录/minigame/wasmcode/md5.webgl.wasm.code.unityweb.wasm.br, CDN使用gzip压缩</td></tr><tr><td>核心资源</td><td>除首资源包外进入游戏核心玩法所需的资源量</td><td>业务自定下载，通常为AssetBundle</td></tr><tr><td>CALLMAIN</td><td>引擎和首场景(Loading)初始化</td><td>通过timelog,或日志查看“CALLMAIN耗时”</td></tr><tr><td>游戏初始化完成</td><td>引擎和首场景完成，出现首个业务场景</td><td>通过timelog, 或日志查看“游戏启动耗时”</td></tr><tr><td>游戏可交互完成</td><td>游戏核心场景完成</td><td>通常定义为用户可交互的时机，可通过<a href="./../ReportStartupStat.html">启动留存上报能力</a>上报统计。eg：休闲游戏为<strong>核心玩法</strong>，RPG游戏为<strong>创角</strong></td></tr><tr><td>内存峰值</td><td>内存峰值</td><td>进程内存峰值，测量方法请参考<a href="./../OptimizationMemory.html">优化Unity WebGL的内存</a></td></tr><tr><td>内存异常退出运行时长</td><td>由于内存不足而使小游戏发生Crash时，当前游戏的运行时长，表示游戏的稳定运行时长</td><td>通过<a href="https://developers.weixin.qq.com/minigame/analysis/assistant.html" target="_blank" rel="noreferrer">小游戏数据助手</a>查看（仅包含线上用户数据） 数据路径：<code>数据 - 性能分析 - 运行性能 - 内存异常退出分析</code></td></tr><tr><td>帧率</td><td>核心玩法的平均帧率</td><td>测量5分钟以上游戏核心玩法帧率，取平均值</td></tr><tr><td>卡顿率</td><td>核心玩法的平均卡顿率</td><td>测量5分钟以上游戏核心玩法卡顿率，取平均值</td></tr></tbody></table><h3 id="代码与资源体积" tabindex="-1">代码与资源体积 <a class="header-anchor" href="#代码与资源体积" aria-label="Permalink to &quot;代码与资源体积&quot;">​</a></h3><table><thead><tr><th>能力</th><th>下载量</th></tr></thead><tbody><tr><td>首资源包(gzip压缩后)</td><td>&lt;5MB</td></tr><tr><td>WASM代码(br压缩后)</td><td>&lt;5MB</td></tr><tr><td>核心玩法资源</td><td>&lt;30MB</td></tr></tbody></table><h3 id="评测工具" tabindex="-1">评测工具 <a class="header-anchor" href="#评测工具" aria-label="Permalink to &quot;评测工具&quot;">​</a></h3><h4 id="启动性能" tabindex="-1">启动性能 <a class="header-anchor" href="#启动性能" aria-label="Permalink to &quot;启动性能&quot;">​</a></h4><p>使用网络模拟工具1MB/s条件，使用Unity适配提供TimeLog窗口、运行日志或<a href="https://developers.weixin.qq.com/minigame/dev/guide/performance/perf-tools-cloudtest.html" target="_blank" rel="noreferrer">小游戏云测试</a>获取性能数据。</p><h4 id="运行性能" tabindex="-1">运行性能 <a class="header-anchor" href="#运行性能" aria-label="Permalink to &quot;运行性能&quot;">​</a></h4><p>使用<a href="https://perfdog.qq.com/" target="_blank" rel="noreferrer">PerfDog</a>测试，PerfDog记录性能数据并上传，取平均值，每种机型测试3组数据再取平均，内存峰值取最大值。</p><h3 id="评测标准" tabindex="-1">评测标准 <a class="header-anchor" href="#评测标准" aria-label="Permalink to &quot;评测标准&quot;">​</a></h3><blockquote><p>评测标准更新时间：2023-05-17（历史现网标准请查阅<a href="./PerfMeasure_old.html">文档</a>）</p></blockquote><p>评测标准依赖于 <strong>现网真实玩家上报的性能数据</strong> 和 <strong>人工批量测试数据</strong> 统计得出。</p><h4 id="开发者需要关注哪些性能指标" tabindex="-1">开发者需要关注哪些性能指标 <a class="header-anchor" href="#开发者需要关注哪些性能指标" aria-label="Permalink to &quot;开发者需要关注哪些性能指标&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">阶段</th><th>重点关注指标</th></tr></thead><tbody><tr><td style="text-align:center;">启动</td><td>1. 游戏初始化完成耗时 2. 游戏可交互耗时</td></tr><tr><td style="text-align:center;">运行</td><td>1. 内存峰值 2. FPS均值 3. 卡顿率 4. 内存异常退出率(iOS) 5. 内存异常退出运行时长</td></tr><tr><td style="text-align:center;">兼容性问题</td><td>1. 逻辑异常 2. 黑/白屏 3. JS Error</td></tr></tbody></table><h4 id="游戏类型说明" tabindex="-1">游戏类型说明 <a class="header-anchor" href="#游戏类型说明" aria-label="Permalink to &quot;游戏类型说明&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">分类</th><th>定义</th></tr></thead><tbody><tr><td style="text-align:center;">重度</td><td>玩法较复杂，通常包含较多游戏场景或支持多人在线游戏（eg: MMO、SLG品类等）</td></tr><tr><td style="text-align:center;">中度</td><td>包含一定养成玩法、内置内购商城等（eg: 模拟经营、卡牌等）</td></tr><tr><td style="text-align:center;">轻度</td><td>仅包含简单操作、无养成体系、无内购，以休闲娱乐为主（eg: 棋牌等）</td></tr></tbody></table><h4 id="ios性能评测标准" tabindex="-1">iOS性能评测标准 <a class="header-anchor" href="#ios性能评测标准" aria-label="Permalink to &quot;iOS性能评测标准&quot;">​</a></h4><p><em><strong>启动性能</strong></em></p><img src="'+d+'"><p><em><strong>运行性能</strong></em></p><p>重点关注：<code>内存峰值</code>、<code>GC后内存峰值</code>、<code>内存异常退出率</code>、<code>内存异常退出运行时长</code></p><img src="'+o+'"><h4 id="android性能评测标准" tabindex="-1">Android性能评测标准 <a class="header-anchor" href="#android性能评测标准" aria-label="Permalink to &quot;Android性能评测标准&quot;">​</a></h4><p><em><strong>启动性能</strong></em></p><img src="'+n+'"><p><em><strong>运行性能</strong></em></p><img src="'+i+'">',35),h=[l];function c(m,b,g,p,u,f){return a(),e("div",null,h)}const y=t(s,[["render",c]]);export{q as __pageData,y as default};
